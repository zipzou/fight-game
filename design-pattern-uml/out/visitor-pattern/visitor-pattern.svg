<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="477px" preserveAspectRatio="none" style="width:828px;height:477px;" version="1.1" viewBox="0 0 828 477" width="828px" zoomAndPan="magnify"><defs><filter height="300%" id="f173p6bzdxffb5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class ExprienceCollector--><rect fill="#FEFECE" filter="url(#f173p6bzdxffb5)" height="73.9102" id="ExprienceCollector" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="6" y="139"/><ellipse cx="27.3" cy="155" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M23.7277,151.2651 L23.7277,149.1069 L31.1071,149.1069 L31.1071,151.2651 L28.6418,151.2651 L28.6418,159.3418 L31.1071,159.3418 L31.1071,161.5 L23.7277,161.5 L23.7277,159.3418 L26.1931,159.3418 L26.1931,151.2651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="107" x="42.7" y="159.5352">ExprienceCollector</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="158" y1="171" y2="171"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="158" y1="179" y2="179"/><ellipse cx="17" cy="190.9775" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="26" y="193.6348">getExprience(String):int</text><ellipse cx="17" cy="203.9326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="26" y="206.5898">getLevel(String):int</text><!--class StageServiceImpl--><rect fill="#FEFECE" filter="url(#f173p6bzdxffb5)" height="60.9551" id="StageServiceImpl" style="stroke: #A80036; stroke-width: 1.5;" width="191" x="105" y="273"/><ellipse cx="148.35" cy="289" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M150.8231,295.1431 Q150.2421,295.4419 149.6029,295.5913 Q148.9638,295.7407 148.2582,295.7407 Q145.7514,295.7407 144.4315,294.0889 Q143.1117,292.437 143.1117,289.3159 Q143.1117,286.1865 144.4315,284.5347 Q145.7514,282.8828 148.2582,282.8828 Q148.9638,282.8828 149.6112,283.0322 Q150.2587,283.1816 150.8231,283.4805 L150.8231,286.2031 Q150.1923,285.6221 149.5988,285.3523 Q149.0053,285.0825 148.3744,285.0825 Q147.0297,285.0825 146.3449,286.1492 Q145.6601,287.2158 145.6601,289.3159 Q145.6601,291.4077 146.3449,292.4744 Q147.0297,293.541 148.3744,293.541 Q149.0053,293.541 149.5988,293.2712 Q150.1923,293.0015 150.8231,292.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="168.65" y="293.5352">StageServiceImpl</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="106" x2="295" y1="305" y2="305"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="113" y="313.9775"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="165" x="125" y="319.6348">commanderLevelManagers:List</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="106" x2="295" y1="325.9551" y2="325.9551"/><!--class LevelManager--><rect fill="#FEFECE" filter="url(#f173p6bzdxffb5)" height="60.9551" id="LevelManager" style="stroke: #A80036; stroke-width: 1.5;" width="251" x="194" y="145.5"/><ellipse cx="275.75" cy="161.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M272.1777,157.7651 L272.1777,155.6069 L279.5571,155.6069 L279.5571,157.7651 L277.0918,157.7651 L277.0918,165.8418 L279.5571,165.8418 L279.5571,168 L272.1777,168 L272.1777,165.8418 L274.6431,165.8418 L274.6431,157.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="296.25" y="166.0352">LevelManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="195" x2="444" y1="177.5" y2="177.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="195" x2="444" y1="185.5" y2="185.5"/><ellipse cx="205" cy="197.4775" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="225" x="214" y="200.1348">handleExprience(ExprienceCollector):void</text><!--class AbstractExprienceManager--><rect fill="#FEFECE" filter="url(#f173p6bzdxffb5)" height="48" id="AbstractExprienceManager" style="stroke: #A80036; stroke-width: 1.5;" width="187" x="444" y="279.5"/><ellipse cx="459" cy="295.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M459.1133,291.0981 L457.9595,296.1699 L460.2754,296.1699 Z M457.6191,288.8569 L460.6157,288.8569 L463.9609,301.25 L461.5122,301.25 L460.7485,298.187 L457.4697,298.187 L456.7227,301.25 L454.2739,301.25 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="155" x="473" y="300.0352">AbstractExprienceManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="445" x2="630" y1="311.5" y2="311.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="445" x2="630" y1="319.5" y2="319.5"/><path d="M8,31 L8,56.3105 A0,0 0 0 0 8,56.3105 L78.5,56.3105 L82.5,138.8449 L86.5,56.3105 L157,56.3105 A0,0 0 0 0 157,56.3105 L157,41 L147,31 L8,31 A0,0 0 0 0 8,31 " fill="#FBFB77" filter="url(#f173p6bzdxffb5)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M147,31 L147,41 L157,41 L147,31 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="14" y="48.5684">相当于是Element接口</text><path d="M199,8 L199,79.2422 A0,0 0 0 0 199,79.2422 L315.5,79.2422 L319.5,145.3496 L323.5,79.2422 L440,79.2422 A0,0 0 0 0 440,79.2422 L440,18 L430,8 L199,8 A0,0 0 0 0 199,8 " fill="#FBFB77" filter="url(#f173p6bzdxffb5)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M430,8 L430,18 L440,18 L430,8 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="205" y="25.5684">相当于是visitor，用于访问element，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="205" y="40.8789">在这里，调用handle方法之后，会去</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="205" y="56.1895">访问ExperienceController的方法，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="205" y="71.5">获取到信息</text><!--class PrimaryExperienceManager--><rect fill="#FEFECE" filter="url(#f173p6bzdxffb5)" height="48" id="PrimaryExperienceManager" style="stroke: #A80036; stroke-width: 1.5;" width="190" x="410.5" y="405.5"/><ellipse cx="425.5" cy="421.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M427.9731,427.6431 Q427.3921,427.9419 426.7529,428.0913 Q426.1138,428.2407 425.4082,428.2407 Q422.9014,428.2407 421.5815,426.5889 Q420.2617,424.937 420.2617,421.8159 Q420.2617,418.6865 421.5815,417.0347 Q422.9014,415.3828 425.4082,415.3828 Q426.1138,415.3828 426.7612,415.5322 Q427.4087,415.6816 427.9731,415.9805 L427.9731,418.7031 Q427.3423,418.1221 426.7488,417.8523 Q426.1553,417.5825 425.5244,417.5825 Q424.1797,417.5825 423.4949,418.6492 Q422.8101,419.7158 422.8101,421.8159 Q422.8101,423.9077 423.4949,424.9744 Q424.1797,426.041 425.5244,426.041 Q426.1553,426.041 426.7488,425.7712 Q427.3423,425.5015 427.9731,424.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="158" x="439.5" y="426.0352">PrimaryExperienceManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="411.5" x2="599.5" y1="437.5" y2="437.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="411.5" x2="599.5" y1="445.5" y2="445.5"/><!--class JuniorExperienceManager--><rect fill="#FEFECE" filter="url(#f173p6bzdxffb5)" height="48" id="JuniorExperienceManager" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="480" y="152"/><ellipse cx="495" cy="168" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M497.4731,174.1431 Q496.8921,174.4419 496.2529,174.5913 Q495.6138,174.7407 494.9082,174.7407 Q492.4014,174.7407 491.0815,173.0889 Q489.7617,171.437 489.7617,168.3159 Q489.7617,165.1865 491.0815,163.5347 Q492.4014,161.8828 494.9082,161.8828 Q495.6138,161.8828 496.2612,162.0322 Q496.9087,162.1816 497.4731,162.4805 L497.4731,165.2031 Q496.8423,164.6221 496.2488,164.3523 Q495.6553,164.0825 495.0244,164.0825 Q493.6797,164.0825 492.9949,165.1492 Q492.3101,166.2158 492.3101,168.3159 Q492.3101,170.4077 492.9949,171.4744 Q493.6797,172.541 495.0244,172.541 Q495.6553,172.541 496.2488,172.2712 Q496.8423,172.0015 497.4731,171.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="147" x="509" y="172.5352">JuniorExperienceManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="481" x2="658" y1="184" y2="184"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="481" x2="658" y1="192" y2="192"/><!--class SeniorExperienceManager--><rect fill="#FEFECE" filter="url(#f173p6bzdxffb5)" height="48" id="SeniorExperienceManager" style="stroke: #A80036; stroke-width: 1.5;" width="181" x="636" y="405.5"/><ellipse cx="651" cy="421.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M653.4731,427.6431 Q652.8921,427.9419 652.2529,428.0913 Q651.6138,428.2407 650.9082,428.2407 Q648.4014,428.2407 647.0815,426.5889 Q645.7617,424.937 645.7617,421.8159 Q645.7617,418.6865 647.0815,417.0347 Q648.4014,415.3828 650.9082,415.3828 Q651.6138,415.3828 652.2612,415.5322 Q652.9087,415.6816 653.4731,415.9805 L653.4731,418.7031 Q652.8423,418.1221 652.2488,417.8523 Q651.6553,417.5825 651.0244,417.5825 Q649.6797,417.5825 648.9949,418.6492 Q648.3101,419.7158 648.3101,421.8159 Q648.3101,423.9077 648.9949,424.9744 Q649.6797,426.041 651.0244,426.041 Q651.6553,426.041 652.2488,425.7712 Q652.8423,425.5015 653.4731,424.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149" x="665" y="426.0352">SeniorExperienceManager</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="637" x2="816" y1="437.5" y2="437.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="637" x2="816" y1="445.5" y2="445.5"/><path d="M89,394 L89,465.2422 A0,0 0 0 0 89,465.2422 L312,465.2422 A0,0 0 0 0 312,465.2422 L312,404 L302,394 L204.5,394 L200.5,334.0011 L196.5,394 L89,394 A0,0 0 0 0 89,394 " fill="#FBFB77" filter="url(#f173p6bzdxffb5)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M302,394 L302,404 L312,404 L302,394 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="95" y="411.5684">这里没有引入ObjectStructrue类，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="95" y="426.8789">而直接使用StageServiceImpl聚</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="95" y="442.1895">合访问者接口，去除了中间1-1-n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="95" y="457.5">的映射关系</text><!--link ExprienceCollector to StageServiceImpl--><path d="M130.647,228.0233 C144.7575,243.2697 159.7257,259.443 172.1716,272.8909 " fill="none" id="ExprienceCollector-StageServiceImpl" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="125.395,232.6541,116.9477,213.221,135.6699,223.1448,125.395,232.6541" style="stroke: #A80036; stroke-width: 1.0;"/><!--link LevelManager to StageServiceImpl--><path d="M290.9965,206.5394 C275.1431,223.5253 255.2164,244.8753 238.0998,263.2145 " fill="none" id="LevelManager-StageServiceImpl" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="229.1833,272.7679,236.2014,271.1108,237.3711,263.9952,230.353,265.6523,229.1833,272.7679" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="226.2742" y="262.4875">n</text><!--link LevelManager to AbstractExprienceManager--><path d="M388.9866,216.6401 C424.3126,237.3009 466.0425,261.7072 496.2586,279.3795 " fill="none" id="LevelManager-AbstractExprienceManager" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="385.4465,222.679,371.7164,206.5394,392.5145,210.5942,385.4465,222.679" style="stroke: #A80036; stroke-width: 1.0;"/><!--link AbstractExprienceManager to PrimaryExperienceManager--><path d="M526.3469,347.4153 C521.4164,366.829 515.8079,388.9127 511.651,405.2805 " fill="none" id="AbstractExprienceManager-PrimaryExperienceManager" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="519.6223,345.4556,531.3301,327.7941,533.1915,348.9018,519.6223,345.4556" style="stroke: #A80036; stroke-width: 1.0;"/><!--link JuniorExperienceManager to AbstractExprienceManager--><path d="M563.4057,200.2819 C559.2019,217.0313 553.4941,239.7735 548.506,259.648 " fill="none" id="JuniorExperienceManager-AbstractExprienceManager" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="555.2297,261.6142,543.5716,279.3085,541.6508,258.2061,555.2297,261.6142" style="stroke: #A80036; stroke-width: 1.0;"/><!--link AbstractExprienceManager to SeniorExperienceManager--><path d="M590.7262,338.9842 C622.6038,360.2359 662.2794,386.6863 690.4917,405.4945 " fill="none" id="AbstractExprienceManager-SeniorExperienceManager" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="586.6992,344.7125,573.9411,327.7941,594.465,333.0638,586.6992,344.7125" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml visitor-pattern

interface ExprienceCollector {
  + getExprience(String):int
  + getLevel(String):int
}

class StageServiceImpl {
  - commanderLevelManagers:List
}

ExprienceCollector <|.. StageServiceImpl

interface LevelManager {
  + handleExprience(ExprienceCollector):void
}

abstract class AbstractExprienceManager {
  
}

StageServiceImpl "n" o-up- LevelManager
LevelManager <|.. AbstractExprienceManager

note top of ExprienceCollector : 相当于是Element接口
note top of LevelManager : 相当于是visitor，用于访问element，\n在这里，调用handle方法之后，会去\n访问ExperienceController的方法，\n获取到信息

class PrimaryExperienceManager
class JuniorExperienceManager
class SeniorExperienceManager
AbstractExprienceManager <|- - PrimaryExperienceManager
JuniorExperienceManager - -|> AbstractExprienceManager
AbstractExprienceManager <|- - SeniorExperienceManager

note bottom of StageServiceImpl : 这里没有引入ObjectStructrue类，\n而直接使用StageServiceImpl聚\n合访问者接口，去除了中间1-1-n\n的映射关系

@enduml

PlantUML version 1.2018.12(Sun Oct 21 18:15:15 CST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_171-b11
Operating System: Mac OS X
OS Version: 10.14.3
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>